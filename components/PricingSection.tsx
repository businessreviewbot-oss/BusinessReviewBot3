'use client';\n\nimport { useState } from 'react';\nimport { motion } from 'framer-motion';\nimport { Button } from '@/app/components/Button';\nimport { Check, Sparkles } from 'lucide-react';\n\nconst plans = [\n  {\n    name: 'Starter',\n    monthlyPrice: 29,\n    annualPrice: 299,\n    description: 'Perfect for small businesses',\n    features: [\n      'Up to 100 reviews/month',\n      'AI-powered responses',\n      'Multi-platform support',\n      'Basic analytics',\n      'Email support',\n    ],\n    priceIdMonthly: process.env.NEXT_PUBLIC_STRIPE_PRICE_ID_MONTHLY || 'price_monthly',\n    priceIdAnnual: process.env.NEXT_PUBLIC_STRIPE_PRICE_ID_ANNUAL || 'price_annual',\n    popular: false,\n  },\n  {\n    name: 'Professional',\n    monthlyPrice: 79,\n    annualPrice: 799,\n    description: 'For growing businesses',\n    features: [\n      'Up to 500 reviews/month',\n      'AI-powered responses',\n      'Multi-platform support',\n      'Advanced analytics',\n      'Priority email support',\n      'Custom response templates',\n      'Team collaboration',\n    ],\n    priceIdMonthly: process.env.NEXT_PUBLIC_STRIPE_PRICE_ID_MONTHLY || 'price_monthly',\n    priceIdAnnual: process.env.NEXT_PUBLIC_STRIPE_PRICE_ID_ANNUAL || 'price_annual',\n    popular: true,\n  },\n  {\n    name: 'Enterprise',\n    monthlyPrice: 199,\n    annualPrice: 1999,\n    description: 'For large organizations',\n    features: [\n      'Unlimited reviews',\n      'AI-powered responses',\n      'Multi-platform support',\n      'Advanced analytics & reporting',\n      '24/7 priority support',\n      'Custom response templates',\n      'Team collaboration',\n      'API access',\n      'Dedicated account manager',\n    ],\n    priceIdMonthly: process.env.NEXT_PUBLIC_STRIPE_PRICE_ID_MONTHLY || 'price_monthly',\n    priceIdAnnual: process.env.NEXT_PUBLIC_STRIPE_PRICE_ID_ANNUAL || 'price_annual',\n    popular: false,\n  },\n];\n\nexport function PricingSection() {\n  const [isAnnual, setIsAnnual] = useState(false);\n  const [loading, setLoading] = useState<string | null>(null);\n\n  const handleCheckout = async (priceId: string, planName: string) => {\n    setLoading(planName);\n    try {\n      const response = await fetch('/api/checkout', {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify({\n          priceId,\n          mode: 'subscription',\n        }),\n      });\n\n      const data = await response.json();\n\n      if (data.url) {\n        window.location.assign(data.url);\n      } else {\n        console.error('No checkout URL returned');\n        setLoading(null);\n      }\n    } catch (error) {\n      console.error('Checkout error:', error);\n      setLoading(null);\n    }\n  };\n\n  return (\n    <section className=\"py-20 px-4 sm:px-6 lg:px-8\">\n      <div className=\"max-w-7xl mx-auto\">\n        <motion.div\n          initial={{ opacity: 0, y: 20 }}\n          animate={{ opacity: 1, y: 0 }}\n          transition={{ duration: 0.6 }}\n          className=\"text-center mb-12\"\n        >\n          <h2 className=\"text-4xl font-bold text-white mb-4\">\n            Simple, Transparent Pricing\n          </h2>\n          <p className=\"text-xl text-white/70 mb-8\">\n            Choose the perfect plan for your business needs\n          </p>\n\n          {/* Toggle */}\n          <div className=\"inline-flex items-center gap-4 bg-white/5 backdrop-blur-xl rounded-full p-2 border border-white/10\">\n            <button\n              onClick={() => setIsAnnual(false)}\n              className={`px-6 py-2 rounded-full transition-all ${\n                !isAnnual\n                  ? 'bg-gradient-to-r from-[#00c2ff] to-[#8b5cf6] text-white'\n                  : 'text-white/60'\n              }`}\n            >\n              Monthly\n            </button>\n            <button\n              onClick={() => setIsAnnual(true)}\n              className={`px-6 py-2 rounded-full transition-all ${\n                isAnnual\n                  ? 'bg-gradient-to-r from-[#00c2ff] to-[#8b5cf6] text-white'\n                  : 'text-white/60'\n              }`}\n            >\n              Annual\n              <span className=\"ml-2 text-xs bg-green-500/20 text-green-400 px-2 py-1 rounded-full\">\n                Save 15%\n              </span>\n            </button>\n          </div>\n        </motion.div>\n\n        <div className=\"grid md:grid-cols-3 gap-8\">\n          {plans.map((plan, index) => (\n            <motion.div\n              key={plan.name}\n              initial={{ opacity: 0, y: 20 }}\n              animate={{ opacity: 1, y: 0 }}\n              transition={{ duration: 0.6, delay: index * 0.1 }}\n              className={`relative bg-white/5 backdrop-blur-xl rounded-2xl border p-8 ${\n                plan.popular\n                  ? 'border-[#00c2ff] shadow-2xl shadow-[#00c2ff]/20 scale-105'\n                  : 'border-white/10'\n              }`}\n            >\n              {plan.popular && (\n                <div className=\"absolute -top-4 left-1/2 transform -translate-x-1/2\">\n                  <div className=\"bg-gradient-to-r from-[#00c2ff] to-[#8b5cf6] px-4 py-1 rounded-full flex items-center gap-1\">\n                    <Sparkles className=\"w-4 h-4\" />\n                    <span className=\"text-sm font-semibold\">Most Popular</span>\n                  </div>\n                </div>\n              )}\n\n              <h3 className=\"text-2xl font-bold text-white mb-2\">{plan.name}</h3>\n              <p className=\"text-white/60 mb-6\">{plan.description}</p>\n\n              <div className=\"mb-6\">\n                <span className=\"text-5xl font-bold text-white\">\n                  ${isAnnual ? plan.annualPrice : plan.monthlyPrice}\n                </span>\n                <span className=\"text-white/60\">/{isAnnual ? 'year' : 'month'}</span>\n              </div>\n\n              <Button\n                onClick={() =>\n                  handleCheckout(\n                    isAnnual ? plan.priceIdAnnual : plan.priceIdMonthly,\n                    plan.name\n                  )\n                }\n                disabled={loading === plan.name}\n                variant={plan.popular ? 'primary' : 'outline'}\n                className=\"w-full mb-6\"\n              >\n                {loading === plan.name ? 'Loading...' : 'Get Started'}\n              </Button>\n\n              <ul className=\"space-y-3\">\n                {plan.features.map((feature) => (\n                  <li key={feature} className=\"flex items-start gap-3\">\n                    <Check className=\"w-5 h-5 text-[#00c2ff] flex-shrink-0 mt-0.5\" />\n                    <span className=\"text-white/80\">{feature}</span>\n                  </li>\n                ))}\n              </ul>\n            </motion.div>\n          ))}\n        </div>\n\n        <motion.div\n          initial={{ opacity: 0 }}\n          animate={{ opacity: 1 }}\n          transition={{ duration: 0.6, delay: 0.4 }}\n          className=\"text-center mt-12 text-white/60\"\n        >\n          <p>All plans include a 7-day free trial. No credit card required.</p>\n        </motion.div>\n      </div>\n    </section>\n  );\n}