import { NextRequest, NextResponse } from 'next/server';\nimport Stripe from 'stripe';\n\nconst stripe = new Stripe(process.env.STRIPE_SECRET_KEY || '', {\n  apiVersion: '2024-12-18.acacia',\n});\n\nexport async function POST(req: NextRequest) {\n  try {\n    const { priceId, mode } = await req.json();\n\n    if (!priceId) {\n      return NextResponse.json({ error: 'Price ID is required' }, { status: 400 });\n    }\n\n    const session = await stripe.checkout.sessions.create({\n      mode: mode || 'subscription',\n      payment_method_types: ['card'],\n      line_items: [\n        {\n          price: priceId,\n          quantity: 1,\n        },\n      ],\n      success_url: `${req.headers.get('origin')}/success?session_id={CHECKOUT_SESSION_ID}`,\n      cancel_url: `${req.headers.get('origin')}`,\n    });\n\n    return NextResponse.json({ url: session.url });\n  } catch (error) {\n    console.error('Error creating checkout session:', error);\n    return NextResponse.json(\n      { error: 'Failed to create checkout session' },\n      { status: 500 }\n    );\n  }\n}